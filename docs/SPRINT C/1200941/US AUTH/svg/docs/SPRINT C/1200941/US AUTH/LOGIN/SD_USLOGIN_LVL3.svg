<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1247px" preserveAspectRatio="none" style="width:2201px;height:1247px;" version="1.1" viewBox="0 0 2201 1247" width="2201px" zoomAndPan="magnify"><defs><filter height="300%" id="fkg6j6cxkv2ew" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="1030.3359" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="159" y="117.4297"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="871" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="410" y="212.8281"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="674.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="519.5" y="241.9609"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="616.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="679.5" y="271.0938"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="558" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="812" y="300.2266"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="507.7344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1037" y="329.3594"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="287" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1367" y="499.1563"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="252.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1623" y="358.4922"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1811" y="639.8203"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2019" y="668.9531"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2129.5" y="387.625"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="966.2031" style="stroke: #000000; stroke-width: 2.0;" width="2115.5" x="73.5" y="174.5625"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="369.2031" style="stroke: #000000; stroke-width: 2.0;" width="1368" x="732" y="460.8906"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="235.8672" style="stroke: #000000; stroke-width: 2.0;" width="1348" x="742" y="543.2891"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="1348" x="742" y="735.2188"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="1368" x="732" y="786.1563"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="145.3359" style="stroke: #000000; stroke-width: 2.0;" width="391.5" x="83.5" y="931.4922"/><rect fill="#FFFFFF" height="56.9375" style="stroke: none; stroke-width: 1.0;" width="391.5" x="83.5" y="1019.8906"/><rect fill="#FFFFFF" height="56.9375" style="stroke: none; stroke-width: 1.0;" width="2115.5" x="73.5" y="1083.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="27" x2="27" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="163.5" x2="163.5" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="415" x2="415" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="524" x2="524" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="684" x2="684" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="817" x2="817" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1041.5" x2="1041.5" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1371.5" x2="1371.5" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1627.5" x2="1627.5" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1815.5" x2="1815.5" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2024" x2="2024" y1="86.2969" y2="1157.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2134" x2="2134" y1="86.2969" y2="1157.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="82.9951">User</text><ellipse cx="27" cy="13" fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,21 L27,48 M14,29 L40,29 M27,48 L14,63 M27,48 L40,63 " fill="none" filter="url(#fkg6j6cxkv2ew)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="1169.7607">User</text><ellipse cx="27" cy="1183.0625" fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,1191.0625 L27,1218.0625 M14,1199.0625 L40,1199.0625 M27,1218.0625 L14,1233.0625 M27,1218.0625 L40,1233.0625 " fill="none" filter="url(#fkg6j6cxkv2ew)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="62.8906" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="93.5" y="18.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="121.5" y="38.4014">«Frontend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="136" y="54.6982">Angular</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="100.5" y="70.9951">Login Component</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="62.8906" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="93.5" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="121.5" y="1176.7607">«Frontend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="136" y="1193.0576">Angular</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="100.5" y="1209.3545">Login Component</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="365" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="372.5" y="54.6982">«Frontend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="372" y="70.9951">AuthService</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="365" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="372.5" y="1176.7607">«Frontend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="372" y="1193.0576">AuthService</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="475" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="482" y="54.6982">«Frontend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="482.5" y="70.9951">HTTP Client</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="475" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="81" x="482" y="1176.7607">«Frontend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="482.5" y="1193.0576">HTTP Client</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="627" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="643" y="54.6982">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="634" y="70.9951">Usercontroller</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="627" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="643" y="1176.7607">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="634" y="1193.0576">Usercontroller</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="752" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="775.5" y="54.6982">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="759" y="70.9951">IUserAppService</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="752" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="775.5" y="1176.7607">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="759" y="1193.0576">IUserAppService</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="978.5" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1000.5" y="54.6982">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="985.5" y="70.9951">UserAppService</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="978.5" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1000.5" y="1176.7607">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="985.5" y="1193.0576">UserAppService</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="247" x="1246.5" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1330.5" y="54.6982">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="233" x="1253.5" y="70.9951">SignInManager&lt;ApplicationUser&gt;</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="247" x="1246.5" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1330.5" y="1176.7607">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="233" x="1253.5" y="1193.0576">SignInManager&lt;ApplicationUser&gt;</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="237" x="1507.5" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1586.5" y="54.6982">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="223" x="1514.5" y="70.9951">UserManager&lt;ApplicationUser&gt;</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="237" x="1507.5" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1586.5" y="1176.7607">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="223" x="1514.5" y="1193.0576">UserManager&lt;ApplicationUser&gt;</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="1758.5" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1774.5" y="54.6982">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="1765.5" y="70.9951">ITokenService</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="1758.5" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1774.5" y="1176.7607">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="1765.5" y="1193.0576">ITokenService</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="1968" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1982.5" y="54.6982">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="1975" y="70.9951">TokenService</text><rect fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="1968" y="1156.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="1982.5" y="1176.7607">«Backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="1975" y="1193.0576">TokenService</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="2090" y="66.6982">«Database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="2097" y="82.9951">MongoDB</text><path d="M2116.5,17.7031 C2116.5,7.7031 2134.5,7.7031 2134.5,7.7031 C2134.5,7.7031 2152.5,7.7031 2152.5,17.7031 L2152.5,43.7031 C2152.5,53.7031 2134.5,53.7031 2134.5,53.7031 C2134.5,53.7031 2116.5,53.7031 2116.5,43.7031 L2116.5,17.7031 " fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2116.5,17.7031 C2116.5,27.7031 2134.5,27.7031 2134.5,27.7031 C2134.5,27.7031 2152.5,27.7031 2152.5,17.7031 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="2090" y="1169.7607">«Database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="2097" y="1186.0576">MongoDB</text><path d="M2116.5,1199.3594 C2116.5,1189.3594 2134.5,1189.3594 2134.5,1189.3594 C2134.5,1189.3594 2152.5,1189.3594 2152.5,1199.3594 L2152.5,1225.3594 C2152.5,1235.3594 2134.5,1235.3594 2134.5,1235.3594 C2134.5,1235.3594 2116.5,1235.3594 2116.5,1225.3594 L2116.5,1199.3594 " fill="#FEFECE" filter="url(#fkg6j6cxkv2ew)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M2116.5,1199.3594 C2116.5,1209.3594 2134.5,1209.3594 2134.5,1209.3594 C2134.5,1209.3594 2152.5,1209.3594 2152.5,1199.3594 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="1030.3359" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="159" y="117.4297"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="871" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="410" y="212.8281"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="674.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="519.5" y="241.9609"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="616.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="679.5" y="271.0938"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="558" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="812" y="300.2266"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="507.7344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1037" y="329.3594"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="287" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1367" y="499.1563"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="252.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1623" y="358.4922"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1811" y="639.8203"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2019" y="668.9531"/><rect fill="#FFFFFF" filter="url(#fkg6j6cxkv2ew)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2129.5" y="387.625"/><polygon fill="#A80036" points="147,113.4297,157,117.4297,147,121.4297,151,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="153" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="34" y="112.3638">Inputs credentials</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="169" x2="211" y1="146.5625" y2="146.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211" x2="211" y1="146.5625" y2="159.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="211" y1="159.5625" y2="159.5625"/><polygon fill="#A80036" points="180,155.5625,170,159.5625,180,163.5625,176,159.5625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="176" y="141.4966">Validate Syntax (HTML5)</text><path d="M73.5,174.5625 L137.5,174.5625 L137.5,181.5625 L127.5,191.5625 L73.5,191.5625 L73.5,174.5625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="966.2031" style="stroke: #000000; stroke-width: 2.0;" width="2115.5" x="73.5" y="174.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="88.5" y="187.6294">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="152.5" y="186.7729">[Validation Successful]</text><polygon fill="#A80036" points="398,208.8281,408,212.8281,398,216.8281,402,212.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="169" x2="404" y1="212.8281" y2="212.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="176" y="207.7622">sign_in(credentials)</text><polygon fill="#A80036" points="507.5,237.9609,517.5,241.9609,507.5,245.9609,511.5,241.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="420" x2="513.5" y1="241.9609" y2="241.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="427" y="236.895">POST /Login</text><polygon fill="#A80036" points="667.5,267.0938,677.5,271.0938,667.5,275.0938,671.5,271.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="529.5" x2="673.5" y1="271.0938" y2="271.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="536.5" y="266.0278">Login(LoginUserDto)</text><polygon fill="#A80036" points="800,296.2266,810,300.2266,800,304.2266,804,300.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="689.5" x2="806" y1="300.2266" y2="300.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="696.5" y="295.1606">Login(user)</text><polygon fill="#A80036" points="1025,325.3594,1035,329.3594,1025,333.3594,1029,329.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="822" x2="1031" y1="329.3594" y2="329.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="829" y="324.2935">Login(user)</text><polygon fill="#A80036" points="1611,354.4922,1621,358.4922,1611,362.4922,1615,358.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1047" x2="1617" y1="358.4922" y2="358.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="1054" y="353.4263">FindByEmailAsync(user.Email)</text><polygon fill="#A80036" points="2117.5,383.625,2127.5,387.625,2117.5,391.625,2121.5,387.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1633" x2="2123.5" y1="387.625" y2="387.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="1640" y="382.5591">Query User by Email</text><polygon fill="#A80036" points="1644,412.7578,1634,416.7578,1644,420.7578,1640,416.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1638" x2="2133.5" y1="416.7578" y2="416.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1650" y="411.6919">ApplicationUser / null</text><polygon fill="#A80036" points="1058,441.8906,1048,445.8906,1058,449.8906,1054,445.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1052" x2="1622" y1="445.8906" y2="445.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1064" y="440.8247">ApplicationUser / null</text><path d="M732,460.8906 L796,460.8906 L796,467.8906 L786,477.8906 L732,477.8906 L732,460.8906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="369.2031" style="stroke: #000000; stroke-width: 2.0;" width="1368" x="732" y="460.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="747" y="473.9575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="811" y="473.1011">[appUser != null]</text><polygon fill="#A80036" points="1355,495.1563,1365,499.1563,1355,503.1563,1359,499.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1047" x2="1361" y1="499.1563" y2="499.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="301" x="1054" y="494.0903">PasswordSignInAsync(appUser, user.Password)</text><polygon fill="#A80036" points="1058,524.2891,1048,528.2891,1058,532.2891,1054,528.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1052" x2="1366" y1="528.2891" y2="528.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1064" y="523.2231">SignInResult</text><path d="M742,543.2891 L806,543.2891 L806,550.2891 L796,560.2891 L742,560.2891 L742,543.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="235.8672" style="stroke: #000000; stroke-width: 2.0;" width="1348" x="742" y="543.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="757" y="556.356">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="121" x="821" y="555.4995">[result.Succeeded]</text><polygon fill="#A80036" points="1611,577.5547,1621,581.5547,1611,585.5547,1615,581.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1047" x2="1617" y1="581.5547" y2="581.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="1054" y="576.4888">GetRolesAsync(appUser)</text><polygon fill="#A80036" points="1058,606.6875,1048,610.6875,1058,614.6875,1054,610.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1052" x2="1627" y1="610.6875" y2="610.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="1064" y="605.6216">roles[]</text><polygon fill="#A80036" points="1799,635.8203,1809,639.8203,1799,643.8203,1803,639.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1047" x2="1805" y1="639.8203" y2="639.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="1054" y="634.7544">GenerateJwtToken(appUser)</text><polygon fill="#A80036" points="2007,664.9531,2017,668.9531,2007,672.9531,2011,668.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1821" x2="2013" y1="668.9531" y2="668.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="1828" y="663.8872">GenerateJwtToken(appUser)</text><polygon fill="#A80036" points="1832,694.0859,1822,698.0859,1832,702.0859,1828,698.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1826" x2="2023" y1="698.0859" y2="698.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="1838" y="693.02">TokenDto</text><polygon fill="#A80036" points="1058,723.2188,1048,727.2188,1058,731.2188,1054,727.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1052" x2="1815" y1="727.2188" y2="727.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="1064" y="722.1528">TokenDto</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="742" x2="2090" y1="736.2188" y2="736.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="747" y="746.4292">[failure]</text><polygon fill="#A80036" points="833,767.1563,823,771.1563,833,775.1563,829,771.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="827" x2="1036" y1="771.1563" y2="771.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="839" y="766.0903">TokenDto(Incorrect password)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="732" x2="2100" y1="787.1563" y2="787.1563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="737" y="797.3667">[user not found]</text><polygon fill="#A80036" points="833,818.0938,823,822.0938,833,826.0938,829,822.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="827" x2="1036" y1="822.0938" y2="822.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="839" y="817.0278">TokenDto(User not found)</text><polygon fill="#A80036" points="700.5,854.2266,690.5,858.2266,700.5,862.2266,696.5,858.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="694.5" x2="816" y1="858.2266" y2="858.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="706.5" y="853.1606">TokenDto</text><polygon fill="#A80036" points="540.5,883.3594,530.5,887.3594,540.5,891.3594,536.5,887.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="534.5" x2="683.5" y1="887.3594" y2="887.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="546.5" y="882.2935">TokenDto</text><polygon fill="#A80036" points="431,912.4922,421,916.4922,431,920.4922,427,916.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="425" x2="523.5" y1="916.4922" y2="916.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="437" y="911.4263">userLogged</text><path d="M83.5,931.4922 L147.5,931.4922 L147.5,938.4922 L137.5,948.4922 L83.5,948.4922 L83.5,931.4922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="145.3359" style="stroke: #000000; stroke-width: 2.0;" width="391.5" x="83.5" y="931.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="98.5" y="944.5591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="162.5" y="943.7026">[isAuthenticated]</text><polygon fill="#A80036" points="180,965.7578,170,969.7578,180,973.7578,176,969.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="174" x2="409" y1="969.7578" y2="969.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="186" y="964.6919">login(token, roles, expirationDate)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="169" x2="211" y1="998.8906" y2="998.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211" x2="211" y1="998.8906" y2="1011.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="211" y1="1011.8906" y2="1011.8906"/><polygon fill="#A80036" points="180,1007.8906,170,1011.8906,180,1015.8906,176,1011.8906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="176" y="993.8247">Navigate to '/main-menu'</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="83.5" x2="475" y1="1020.8906" y2="1020.8906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="88.5" y="1031.1011">[not authenticated]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="169" x2="211" y1="1055.8281" y2="1055.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211" x2="211" y1="1055.8281" y2="1068.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="211" y1="1068.8281" y2="1068.8281"/><polygon fill="#A80036" points="180,1064.8281,170,1068.8281,180,1072.8281,176,1068.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="176" y="1050.7622">Display error message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="73.5" x2="2189" y1="1084.8281" y2="1084.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="78.5" y="1095.0386">[Validation Failed]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="169" x2="211" y1="1119.7656" y2="1119.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="211" x2="211" y1="1119.7656" y2="1132.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="211" y1="1132.7656" y2="1132.7656"/><polygon fill="#A80036" points="180,1128.7656,170,1132.7656,180,1136.7656,176,1132.7656" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="176" y="1114.6997">Display Syntax Error</text><!--MD5=[06789cd47febb619e27c2219638cf70a]
@startuml
actor User

participant "Angular\nLogin Component" as Frontend <<Frontend>>
participant "AuthService" as AuthService <<Frontend>>
participant "HTTP Client" as HttpClient <<Frontend>>

participant "Usercontroller" as Controller <<Backend>>
participant "IUserAppService" as IUserAppService <<Backend>>
participant "UserAppService" as UserAppService <<Backend>>
participant "SignInManager<ApplicationUser>" as SignInManager <<Backend>>
participant "UserManager<ApplicationUser>" as UserManager <<Backend>>
participant "ITokenService" as ITokenService <<Backend>>
participant "TokenService" as TokenService <<Backend>>
database "MongoDB" as MongoDB <<Database>>

User -> Frontend: Inputs credentials
activate Frontend
Frontend -> Frontend: Validate Syntax (HTML5)

alt Validation Successful
    Frontend -> AuthService: sign_in(credentials)
    activate AuthService

    AuthService -> HttpClient: POST /Login
    activate HttpClient
    HttpClient -> Controller: Login(LoginUserDto)
    activate Controller

Controller -> IUserAppService: Login(user)
activate IUserAppService
IUserAppService -> UserAppService: Login(user)
activate UserAppService

UserAppService -> UserManager: FindByEmailAsync(user.Email)
activate UserManager
UserManager -> MongoDB: Query User by Email
activate MongoDB
MongoDB - -> UserManager: ApplicationUser / null
deactivate MongoDB
UserManager - -> UserAppService: ApplicationUser / null

alt appUser != null
    UserAppService -> SignInManager: PasswordSignInAsync(appUser, user.Password)
    activate SignInManager
    SignInManager - -> UserAppService: SignInResult

    alt result.Succeeded
        UserAppService -> UserManager: GetRolesAsync(appUser)
        UserManager - -> UserAppService: roles[]
        deactivate UserManager
        UserAppService -> ITokenService: GenerateJwtToken(appUser)
        activate ITokenService
        ITokenService -> TokenService: GenerateJwtToken(appUser)
        activate TokenService
        TokenService - -> ITokenService: TokenDto
        deactivate TokenService
        ITokenService - -> UserAppService: TokenDto
        deactivate ITokenService
    else failure
        UserAppService - -> IUserAppService: TokenDto(Incorrect password)
    end
    deactivate SignInManager
else user not found
    UserAppService - -> IUserAppService: TokenDto(User not found)
end

deactivate UserAppService
IUserAppService - -> Controller: TokenDto
deactivate IUserAppService
Controller - -> HttpClient: TokenDto
deactivate Controller
HttpClient - -> AuthService: userLogged
deactivate HttpClient

alt isAuthenticated
    AuthService -> Frontend: login(token, roles, expirationDate)
    Frontend -> Frontend: Navigate to '/main-menu'
else not authenticated
    Frontend -> Frontend: Display error message
end

deactivate AuthService
else Validation Failed
    Frontend -> Frontend: Display Syntax Error
end
deactivate Frontend
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.21+9
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>