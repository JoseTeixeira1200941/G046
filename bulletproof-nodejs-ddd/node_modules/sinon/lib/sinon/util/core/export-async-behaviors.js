"use strict";

<<<<<<< HEAD
const arrayProto = require("@sinonjs/commons").prototypes.array;
const reduce = arrayProto.reduce;
=======
var arrayProto = require("@sinonjs/commons").prototypes.array;
var reduce = arrayProto.reduce;
>>>>>>> 8fea50a98e3683e334cf159da2406c53e1f99e99

module.exports = function exportAsyncBehaviors(behaviorMethods) {
    return reduce(
        Object.keys(behaviorMethods),
<<<<<<< HEAD
        function (acc, method) {
            // need to avoid creating another async versions of the newly added async methods
            if (method.match(/^(callsArg|yields)/) && !method.match(/Async/)) {
                acc[`${method}Async`] = function () {
                    const result = behaviorMethods[method].apply(
                        this,
                        arguments,
                    );
=======
        function(acc, method) {
            // need to avoid creating another async versions of the newly added async methods
            if (method.match(/^(callsArg|yields)/) && !method.match(/Async/)) {
                acc[method + "Async"] = function() {
                    var result = behaviorMethods[method].apply(this, arguments);
>>>>>>> 8fea50a98e3683e334cf159da2406c53e1f99e99
                    this.callbackAsync = true;
                    return result;
                };
            }
            return acc;
        },
<<<<<<< HEAD
        {},
=======
        {}
>>>>>>> 8fea50a98e3683e334cf159da2406c53e1f99e99
    );
};
