'use strict';

var format = require('./format');
<<<<<<< HEAD

var _require = require('triple-beam'),
    MESSAGE = _require.MESSAGE;

var jsonStringify = require('safe-stable-stringify');
=======
var _require = require('triple-beam'),
  MESSAGE = _require.MESSAGE;
var jsonStringify = require('safe-stable-stringify');

>>>>>>> 8fea50a98e3683e334cf159da2406c53e1f99e99
/*
 * function logstash (info)
 * Returns a new instance of the LogStash Format that turns a
 * log `info` object into pure JSON with the appropriate logstash
 * options. This was previously exposed as { logstash: true }
 * to transports in `winston < 3.0.0`.
 */
<<<<<<< HEAD


module.exports = format(function (info) {
  var logstash = {};

=======
module.exports = format(function (info) {
  var logstash = {};
>>>>>>> 8fea50a98e3683e334cf159da2406c53e1f99e99
  if (info.message) {
    logstash['@message'] = info.message;
    delete info.message;
  }
<<<<<<< HEAD

=======
>>>>>>> 8fea50a98e3683e334cf159da2406c53e1f99e99
  if (info.timestamp) {
    logstash['@timestamp'] = info.timestamp;
    delete info.timestamp;
  }
<<<<<<< HEAD

=======
>>>>>>> 8fea50a98e3683e334cf159da2406c53e1f99e99
  logstash['@fields'] = info;
  info[MESSAGE] = jsonStringify(logstash);
  return info;
});